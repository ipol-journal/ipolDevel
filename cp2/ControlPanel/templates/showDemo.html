 {% extends "base.html" %} {% block title %}showDemo{% endblock %} {% block bodyid %}showDemo{% endblock %}
{% block header %}
    {% include "header.html" %}
{% endblock %} {% block content %}
<div id="demoinfo-container">
    <div id="demo-header">
        <h1>Demo Editor</h1>
        <h3>Title: {{ title }}</h3>
        <div id="demo-buttons">
            <div class="optionLine">
                <a id="demoExtras" href="/cp2/demoExtras?demo_id={{ demo_id }}" class="btn">Demo Extras</a>
                <a href="showArchive?demo_id={{ demo_id }}&title={{title}}" class="btn">Archive</a>
                <a id="showBlobsDemo" href="/cp2/showBlobsDemo?demo_id={{ demo_id }}" class="btn">Blobs</a>
                {% if not can_edit %}
                <button id="editors-btn" class="btn">Editors</button id="editors-btn">
                {% else %}
                <button id="editors-btn" class="btn btn-disabled" disabled>Editors</button id="editors-btn">    
                {% endif %}
            </div>
            <div class="members">
                <dialog id="editors-dialog">
                    <h1>{{ title }} editors</h1>
                    {% for editor in editors_list %}
                    <div id="editor-{{editor.id}}" class="di-flex editor">
                        <p>{{editor.name}}</p>
                        <button class="btn btn-danger" data-editor-id="{{editor.id}}" data-demo-id="{{demo_id}}">Remove editor</button>
                    </div>
                    {% endfor %}
                    <h2>Add demo editor</h2>
                    <form id="add-editor-form" autocomplete="off" action="{% url 'add_demo_editor' %}" method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        <input type="hidden" name="demo_id" value="{{ demo_id }}">
                        <label for="editor">Editor</label>
                        <select name="editor_id" id="add-editor-input" form="add-editor-form" required>
                            <option value="" disabled selected>Select an editor</option>
                            {% for editor in available_editors %}
                            <option value="{{editor.id}}">{{editor.name}}, {{editor.mail}}</option>
                            {% endfor %}
                        </select>
                        <input type="submit" class="btn btn-add" value="Submit">
                    </form>
                    <button id="editors-btn-close" class="btn btn-delete">X</button>
                  </dialog>
            </div>
        </div>
    </div>
    <div id="editorContainer">
        <div>DDL editor</div>
        <pre id="aceEditor"></pre>
        <div id="ddl-info">
            <div id="saveDDL">
                <button id="save-btn" class="btn" disabled>Save DDL</button>
            </div>
            {% if not can_edit %}
            <div id="can_edit">
                <h2>You are not allowed to edit this demo</h2>
            </div>
            {% endif %}
            <div id="saved-texts">
                <p id="saved-text">DDL already saved</p>
                <p id="not-saved-text" class="di-none">There are unsaved changes.</p>
            </div>
            <div>
                <a href="showDemo/ddl_history?demo_id={{demo_id}}&title={{title}}" id="history-btn" class="btn">DDL History</a>
            </div>
            <div>
                <button id="changeThemeWhite" class="btn">White Theme</button>
                <button id="changeThemeDark" class="btn btn-dark">Dark Theme</button>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" src="/cp2/static/js/showDemo.js"></script>
{% endblock %}